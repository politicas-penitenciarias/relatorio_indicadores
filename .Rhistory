rel_generos <-
readRDS("../data/data_rds/rel07_taxas02.rds") |>
filter(ciclo == vetor_filtro_ciclo) |>
ungroup() |>
select(
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "sexo",
values_from = c("tx_aprisionamento","tx_penalizacao")
) |>
mutate(
rel_aprisionamento = tx_aprisionamento_Masculino / tx_aprisionamento_Feminino
#rel_penalizacao = round(tx_penalizacao_Masculino / tx_penalizacao_Feminino, digits = 2 )
)
rel_generos <-
readRDS("../data/data_rds/rel07_taxas02.rds") |>
filter(ciclo == vetor_filtro_ciclo) |>
ungroup() |>
select(
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "sexo",
values_from = c("tx_aprisionamento","tx_penalizacao")
) |>
ungroup() |>
mutate(
rel_aprisionamento = round(tx_aprisionamento_Masculino / tx_aprisionamento_Feminino, digits = 2),
rel_penalizacao = round(tx_penalizacao_Masculino / tx_penalizacao_Feminino, digits = 2 )
)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
`Unidade Federativa` = uf,
Sexo = sexo,
`Taxa de aprisionamento` = tx_aprisionamento,
`Taxa de penalização` = tx_penalizacao
)
library(tidyverse)
library(knitr)
library(plotly)
library(kableExtra)
library(DT)
library(gganimate)
library(formattable)
library(abjutils)
library(janitor)
library(ggforce) #UTILIZA FACET_WRAP_PAGINATE
cores <- c("#294661","#7F312F","#808080","#B8860B","#5E3B56","#5F9EA0","#808000","#A0522D",
"#F5DEB3","#FF9900","#8B008B","#5F6B6D","#FB8281","#F4D25A","#7F898A","#A4DDEE",
"#FDAB89","#B687AC","#28738A","#A78F8F","#168980","darkred","#0000FF","#00FFFF",
"#DAA520","#DEB887") #VETOR DE CORES PARA OS GRAFICOS
vetor_filtro_ciclo <- 13
vetor_filtro_semestre <- "segundo"
vetor_filtro_ano <- 2022
vetor_modalidade <- c("Custódia em unidade prisional",
"Domiciliar monitorado eletronicamente",
"Domiciliar não monitorado eletronicamente",
"Custódia em carceragens ou batalhões"
)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
`Unidade Federativa` = uf,
Sexo = sexo,
`Taxa de aprisionamento` = tx_aprisionamento,
`Taxa de penalização` = tx_penalizacao
)
View(p1)
#| label: fig-aprisionamento-ufs-ciclo13
#| fig-cap: >
#|       Taxas de aprisionamento e penalização por estados da federação.
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
`Unidade Federativa` = uf,
Sexo = sexo,
`Taxa de aprisionamento` = tx_aprisionamento,
`Taxa de penalização` = tx_penalizacao
) |>
group_by(uf,sexo) |>
summarise(
Capacidade = sum(Capacidade,na.rm = TRUE),
`População` = sum(`População`, na.rm = TRUE),
vagas = sum(vagas, na.rm = TRUE)
) |>
filter(vagas != 0) |>
arrange(desc(vagas)) |>
mutate(
uf = factor(uf, levels = uf, ordered = TRUE)
)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
uf,
Sexo = sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "sexo",
values_from = c("tx_aprisionamento","tx_penalizacao")
)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
uf,
Sexo = sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "sexo",
values_from = c("tx_aprisionamento","tx_penalizacao")
)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
uf,
Sexo = sexo,
tx_aprisionamento,
tx_penalizacao
)
View(p1)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
uf,
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "sexo",
values_from = c("tx_aprisionamento","tx_penalizacao")
)
View(p1)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
uf,
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "sexo",
values_from = c("tx_aprisionamento","tx_penalizacao")
)
View(p1)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
uf,
#sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "uf",
values_from = c("tx_aprisionamento","tx_penalizacao")
)
View(p1)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
group_by(uf) |>
summarise(
tx_aprisionamento = sum(tx_aprisionamento,na.rm = TRUE),
tx_penalizacao = sum(tx_penalizacao, na.rm = TRUE)
) |>
pivot_wider(
names_from = "uf",
values_from = c("tx_aprisionamento","tx_penalizacao")
)
View(p1)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
group_by(uf) |>
summarise(
tx_aprisionamento = sum(tx_aprisionamento,na.rm = TRUE),
tx_penalizacao = sum(tx_penalizacao, na.rm = TRUE)
)
View(p1)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
uf,
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "uf",
values_from = c("tx_aprisionamento","tx_penalizacao")
)
View(p1)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
uf,
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "sexo",
values_from = c("tx_aprisionamento","tx_penalizacao")
)
View(p1)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "sexo",
values_from = c("tx_aprisionamento","tx_penalizacao")
)
View(p1)
p1 <-
readRDS("../data/data_rds/rel07_taxas02.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "sexo",
values_from = c("tx_aprisionamento","tx_penalizacao")
)
View(p1)
p1 <-
readRDS("../data/data_rds/rel07_taxas02.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
sexo,
tx_aprisionamento,
tx_penalizacao
)
View(p1)
p1 <-
readRDS("../data/data_rds/rel07_taxas02.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_longer(
cols = sexo,
names_to = "tipo_taxa",
values_to = "taxa"
)
View(p1)
?pivot_longer()
p1 <-
readRDS("../data/data_rds/rel07_taxas02.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_longer(
cols = c(tx_aprisionamento,tx_penalizacao) ,
names_to = "tipo_taxa",
values_to = "taxa"
)
View(p1)
#| label: fig-aprisionamento-ufs-sexo-ciclo13
#| fig-cap: >
#|       Comparação entre as taxas de aprisionamento e penalização por sexo e estados da federação.
p1 <-
readRDS("../data/data_rds/rel07_taxas02.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_longer(
cols = c(tx_aprisionamento,tx_penalizacao) ,
names_to = "tipo_taxa",
values_to = "taxa"
)
p1 <- p1 |>
plot_ly(
x = ~ tipo_taxa,
y = ~ taxa,
color = sexo,
name = "Taxa de aprisionamento feminino",
type = 'bar',
text = ~ `tx_aprisionamento_Feminino`,
textposition = "auto",
alpha = 0.7,
marker = list(color = "#294661")
)
#| label: fig-aprisionamento-ufs-sexo-ciclo13
#| fig-cap: >
#|       Comparação entre as taxas de aprisionamento e penalização por sexo e estados da federação.
p1 <-
readRDS("../data/data_rds/rel07_taxas02.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_longer(
cols = c(tx_aprisionamento,tx_penalizacao) ,
names_to = "tipo_taxa",
values_to = "taxa"
)
p1 <- p1 |>
plot_ly(
x = ~ tipo_taxa,
y = ~ taxa,
color = sexo,
name = "Taxa de aprisionamento feminino",
type = 'bar',
text = ~ `tipo_taxa`,
textposition = "auto",
alpha = 0.7,
marker = list(color = "#294661")
)
p1 <-
readRDS("../data/data_rds/rel07_taxas02.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_longer(
cols = c(tx_aprisionamento,tx_penalizacao) ,
names_to = "tipo_taxa",
values_to = "taxa"
)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
group_by(uf) |>
summarise(
tx_aprisionamento = sum(tx_aprisionamento,na.rm = TRUE),
tx_penalizacao = sum(tx_penalizacao, na.rm = TRUE)
)
View(p1)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
group_by(uf) |>
summarise(
tx_aprisionamento = round(sum(tx_aprisionamento,na.rm = TRUE), digits = 2),
tx_penalizacao = round(sum(tx_penalizacao, na.rm = TRUE), digits = 2)
)
View(p1)
library(tidyverse)
library(knitr)
library(plotly)
library(kableExtra)
library(DT)
library(gganimate)
library(formattable)
library(abjutils)
library(janitor)
library(ggforce) #UTILIZA FACET_WRAP_PAGINATE
cores <- c("#294661","#7F312F","#808080","#B8860B","#5E3B56","#5F9EA0","#808000","#A0522D",
"#F5DEB3","#FF9900","#8B008B","#5F6B6D","#FB8281","#F4D25A","#7F898A","#A4DDEE",
"#FDAB89","#B687AC","#28738A","#A78F8F","#168980","darkred","#0000FF","#00FFFF",
"#DAA520","#DEB887") #VETOR DE CORES PARA OS GRAFICOS
vetor_filtro_ciclo <- 13
vetor_filtro_semestre <- "segundo"
vetor_filtro_ano <- 2022
vetor_modalidade <- c("Custódia em unidade prisional",
"Domiciliar monitorado eletronicamente",
"Domiciliar não monitorado eletronicamente",
"Custódia em carceragens ou batalhões"
)
t1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
uf,
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "sexo",
values_from = c("tx_aprisionamento","tx_penalizacao")
) |>
select(
`Unidade federativa` = uf,
`Tx de aprisionamento feminino` = tx_aprisionamento_Feminino,
`Tx de aprisionamento masculino` = tx_aprisionamento_Masculino,
`Tx de penalização feminina` = tx_penalizacao_Feminino,
`Tx de penalização masculina` = tx_penalizacao_Masculino,
)|>
mutate(
`Tx de aprisionamento feminino` = format(`Tx de aprisionamento feminino`, big.mark = ".",decimal.mark = ","),
`Tx de aprisionamento masculino` = format(`Tx de aprisionamento masculino`, big.mark = ".",decimal.mark = ","),
`Tx de penalização feminina` = format(`Tx de penalização feminina`, big.mark = ".",decimal.mark = ","),
`Tx de penalização masculina` = format(`Tx de penalização masculina`, big.mark = ".",decimal.mark = ","),
)
View(t1)
p1 <-
readRDS("../data/data_rds/rel07_taxas01.rds") |>
filter(
ciclo == vetor_filtro_ciclo
) |>
ungroup() |>
select(
uf,
sexo,
tx_aprisionamento,
tx_penalizacao
) |>
pivot_wider(
names_from = "sexo",
values_from = c("tx_aprisionamento","tx_penalizacao")
)
View(p1)
